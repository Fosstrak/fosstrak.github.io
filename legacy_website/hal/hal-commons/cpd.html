<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>Fosstrak - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="../../" id="bannerLeft">
    
                                            <img src="../images/banner_left.gif" alt="" />
    
            </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
            <div class="xleft">
        Last Published: Aug 18, 2009 11:29:00 CEST
                          |   
          <a href="../../index.html">Fosstrak</a>
              &gt;
      
          <a href="../../../../">HAL</a>
              &gt;
      
          hal-commons
                        </div>
            <div class="xright">      <a href="../../index.html">Fosstrak</a>
          |
          <a href="../../reader/index.html">Reader</a>
          |
          <a href="../../fc/index.html">Filtering and Collection</a>
          |
          <a href="../../epcis/index.html">EPCIS</a>
          |
          <a href="../../tdt/index.html">Tag Data Translation</a>
          |
          <a href="../index.html">HAL</a>
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
                   <h5>Fosstrak</h5>
        <ul>
              
    <li class="none">
              <a href="../../index.html">Home</a>
        </li>
          </ul>
          <h5>HAL Project</h5>
        <ul>
              
    <li class="none">
              <a href="../index.html">Overview</a>
        </li>
              
    <li class="none">
              <a href="../features.html">Features</a>
        </li>
              
    <li class="none">
              <a href="../download.html">Download</a>
        </li>
              
    <li class="none">
              <a href="../license.html">License</a>
        </li>
              
    <li class="none">
              <a href="../faq.html">FAQ</a>
        </li>
              
    <li class="none">
              <a href="../team-list.html">Project Team</a>
        </li>
              
    <li class="none">
              <a href="../mail-lists.html">Mailing Lists</a>
        </li>
              
    <li class="none">
              <a href="../issue-tracking.html">Issue Tracking</a>
        </li>
              
    <li class="none">
              <a href="../source-repository.html">Source Repository</a>
        </li>
          </ul>
          <h5>Guides &amp; Documentation</h5>
        <ul>
              
          
              
      
            
      
            
      
            
      
              
        <li class="expanded">
              <a href="../docs/user-guide.html">User</a>
                <ul>
                  
    <li class="none">
              <a href="../docs/user-simulator.html">Simulator</a>
        </li>
                  
    <li class="none">
              <a href="../docs/user-impinj.html">Impinj</a>
        </li>
                  
    <li class="none">
              <a href="../docs/user-feig.html">Feig</a>
        </li>
                  
    <li class="none">
              <a href="../docs/user-changelog.html">User Changlog</a>
        </li>
              </ul>
        </li>
              
          
              
      
            
      
              
        <li class="expanded">
              <a href="../docs/developer-index.html">Developer</a>
                <ul>
                  
    <li class="none">
              <a href="../docs/developer-guide.html">Developer Guide</a>
        </li>
                  
    <li class="none">
              <a href="../docs/developer-changelog.html">Developer Changelog</a>
        </li>
              </ul>
        </li>
              
    <li class="none">
              <a href="../apidocs/index.html">JavaDoc</a>
        </li>
          </ul>
          <h5>HAL Project Modules</h5>
        <ul>
              
          
              
      
            
      
            
      
            
            
            
      
            
      
              
            <li class="expanded">
              <a href="project-reports.html">HAL Commons</a>
                <ul>
                  
    <li class="none">
              <a href="dependencies.html">Dependencies</a>
        </li>
                  
    <li class="none">
              <a href="dependency-convergence.html">Dependency Convergence</a>
        </li>
                  
    <li class="none">
              <a href="pmd.html">PMD Report</a>
        </li>
                  
    <li class="none">
              <strong>CPD Report</strong>
        </li>
                  
    <li class="none">
              <a href="javancss.html">JavaNCSS Report</a>
        </li>
                  
    <li class="none">
              <a href="issue-tracking.html">Issue Tracking</a>
        </li>
              </ul>
        </li>
              
                
              
      
              
        <li class="collapsed">
              <a href="../hal-impl-sim/project-reports.html">HAL Simulator</a>
              </li>
              
                
              
      
              
        <li class="collapsed">
              <a href="../hal-impl-impinj/project-reports.html">HAL Impinj</a>
              </li>
              
                
              
      
              
        <li class="collapsed">
              <a href="../hal-impl-feig/project-reports.html">HAL Feig</a>
              </li>
          </ul>
                                             
                        
                        
            <a href="http://www.autoidlabs.org/" title="Auto-ID" id="poweredBy">
                            <img alt="Auto-ID" src="../images/logos/supportedByAutoid4.png" />
            </a>
                               
  

  
    
  
  
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results</h2><p>The following document contains the results of PMD's  <a href="http://pmd.sourceforge.net/cpd.html">CPD</a> 3.7.</p></div><div class="section"><h2>Duplications</h2><p><table class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\fosstrak\hal\UnsignedByteArray.java</td><td><a href="./xref/org/fosstrak/hal/UnsignedByteArray.html#231">231</a></td></tr><tr class="a"><td>org\fosstrak\hal\util\ByteBlock.java</td><td><a href="./xref/org/fosstrak/hal/util/ByteBlock.html#301">301</a></td></tr><tr class="b"><td colspan='2'><div class="source"><pre>	}
	
	/**
	 * creates a byte array out of the given number. The numbering
	 * of the bytes starts from the left to the right in contrary
	 * to usual numbering e.g. 
	 * &lt;code&gt;n=0134A0FF002EC0B1&lt;/code&gt; returns the array
	 * &lt;code&gt;{ 01,34,A0,FF,00,2E,C0,B1 }&lt;/code&gt;
	 * 
	 * @param n the number
	 * 
	 * @return the byte array representing the number.
	 */
	public static byte[] numberToByteArray(long n) 
	{
		byte[] ba = new byte[8];
		byte b;

		// go through all bytes and filter them out
		for (int s = 0; s &lt; 8; s++) {
			b = (byte) ((n &gt;&gt; ((8 - 1 - s) * 8)) &amp; 0xFF);
			ba[s] = b;
		}
		
		return ba;
	}

	
	/**
	 * creates a byte array out of the given number. The numbering
	 * of the bytes starts from the left to the right in contrary
	 * to usual numbering.
	 * 
	 * @param n the number
	 * 
	 * @return the byte array representing the number.
	 */
	public static byte[] numberToByteArray(int n) 
	{
		byte[] ba = new byte[4];
		byte b;

		// go through all bytes and filter them out
		for (int s = 0; s &lt; 4; s++) {
			b = (byte) ((n &gt;&gt; ((4 - 1 - s) * 8)) &amp; 0xFF);
			ba[s] = b;
		}
		
		return ba;
	}

	
	/**
	 * creates a byte array out of the given number. The numbering
	 * of the bytes starts from the left to the right in contrary
	 * to usual numbering.
	 * 
	 * @param n the number
	 * 
	 * @return the byte array representing the number.
	 */
	public static byte[] numberToByteArray(short n) {
		byte[] ba = new byte[2];
		byte b;

		// go through all bytes and filter them out
		for (int s = 0; s &lt; 2; s++) {
			b = (byte) ((n &gt;&gt; ((2 - 1 - s) * 8)) &amp; 0xFF);
			ba[s] = b;
		}
		
		return ba;
	}


	/**
	 * checks if two given byte block regions are equal or not.
	 * 
	 * @param firstArray the first byte array.
	 * @param firstOffset the offset of the first block in the array.
	 * @param secondArray the second byte array.
	 * @param secondOffset the offset of the second block in the array.
	 * @param length the length of the blocks in the arrays.
	 * 
	 * @return true, if both byte block regions are equal.
	 */
	public static boolean equalsRegion(
				byte[] firstArray, int firstOffset,
				byte[] secondArray, int secondOffset, 
				int length) 
	{
		int firstIndex = firstOffset;
		int secondIndex = secondOffset;
		
		//-- compare byte blocks in arrays
		while (firstIndex &lt; firstArray.length
				&amp;&amp; secondIndex &lt; secondArray.length
				&amp;&amp; firstIndex &lt; firstOffset + length
				&amp;&amp; secondIndex &lt; secondOffset + length
				&amp;&amp; firstArray[firstIndex] == secondArray[secondIndex]) {
			firstIndex++;
			secondIndex++;
		}

		//-- check if end reached, i.e. blocks are equal
		if (firstIndex == firstOffset + length
			&amp;&amp; secondIndex == secondOffset + length) 
			return true;
		else
			return false;
	}

	/**
	 * checks if two given byte regions are equal or not.
	 * 
	 * @param firstArray the first byte array.
	 * @param firstOffset the offset of the first block in the array.
	 * @param secondArray the second byte array.
	 * 
	 * @return true, if both byte block regions are equal.
	 */
	public static boolean equalsRegion(
				byte[] firstArray, int firstOffset,
				byte[] secondArray) 
	{
		return equalsRegion(firstArray, firstOffset, secondArray, 0, secondArray.length);
	}


	/**
	 * compares two given byte block regions. 
	 * 
	 * @param firstArray the first byte array.
	 * @param firstOffset the offset of the first block in the array.
	 * @param secondArray the second byte array.
	 * @param secondOffset the offset of the second block in the array.
	 * @param length the length of the blocks in the arrays.
	 * 
	 * @return -1, if first block &lt; second block,
	 * 			 0, if first block == second block,
	 * 			 1, if first block &gt; second block.
	 */
	public static int compareRegion(
				byte[] firstArray, int firstOffset,
				byte[] secondArray, int secondOffset, 
				int length) 
	{
		int firstIndex = firstOffset;
		int secondIndex = secondOffset;
		
		//-- compare byte blocks in arrays
		while (firstIndex &lt; firstArray.length
				&amp;&amp; secondIndex &lt; secondArray.length
				&amp;&amp; firstIndex &lt; firstOffset + length
				&amp;&amp; secondIndex &lt; secondOffset + length) {
			int res = compare(firstArray[firstIndex], secondArray[secondIndex]);
			if (res != 0)
				return res;
			
			firstIndex++;
			secondIndex++;
		}
		
		// end of blocks reached =&gt; blocks equal
		return 0;
	}


	/**
	 * compares two bytes which are interpreted as unsigned bytes.
	 * 
	 * @param first the first byte.
	 * @param second the second byte.
	 * @return -1, if first &lt; second,
	 * 			 0, if first == second,
	 * 			 1, if first &gt; second 
	 */
	public static int compare(byte first, byte second)
	{
		int f = first &amp; 0x000000FF;
		int s = second &amp; 0x000000FF;
		
		if (f &lt; s) 
			return -1;
		else if (f == s)
			return 0;
		else
			return 1;
	}
	

	/**
	 * returns a byte array containing the region of the source byte array. 
	 * 
	 * @param array the byte array.
	 * @param offset the offset of the region in the byte array.
	 * @param length the length of the region in the byte array.
	 * 
	 * @return a byte array containing the region of the source byte array.
	 */
	public static byte[] getRegion(byte[] array, int offset, int length) 
	{
		byte[] region = new byte[length];
		
		// copy region into new byte array
		for (int i = 0; i &lt; length; i++)
			region[i] = array[i + offset];

		return region;
	}

	/**
	 * replaces the region of the first byte array by the 
	 * bytes of the second byte array. 
	 * 
	 * @param firstArray the first byte array.
	 * @param offset the offset of the region in the first array.
	 * @param secondArray the second byte array.
	 */
	public static void replaceRegion(byte[] firstArray, int offset, 
								byte[] secondArray) 
	{
		// copy region into byte array
		for (int i = 0; i &lt; secondArray.length; i++)
			firstArray[i + offset] = secondArray[i];
	}


	/**
	 * replaces the region of a first byte array by the region 
	 * of the second byte array. 
	 * 
	 * @param firstArray the first byte array.
	 * @param firstOffset the offset of the region in the first array.
	 * @param secondArray the second byte array.
	 * @param secondOffset the offset of the region in the second array.
	 * @param length the length of the region in the arrays.
	 */
	public static void replaceRegion(
				byte[] firstArray, int firstOffset,
				byte[] secondArray, int secondOffset, int length)
	{
		// copy region into byte array
		for (int i = 0; i &lt; length; i++)
			firstArray[firstOffset + i] = secondArray[secondOffset + i];
	}
	
	/**
	 * transforms any String into a byte array using UTF8 encoding.
	 * 
	 * @param string the string that has to be converted.
	 * 
	 * @return the converted string as a byte array.
	 */
	public static byte[] stringConverter(String string){
		byte[]defaultBytes=null;
		byte[]utf8Bytes=null;
		
		System.out.println(System.getProperty(&quot;file.encoding&quot;));
		String original = new String(string);
   
		System.out.println(&quot;original = &quot; + original);
		System.out.println();
   
		try {
			utf8Bytes = original.getBytes(&quot;UTF8&quot;);
			defaultBytes = original.getBytes();
 
			String roundTrip = new String(utf8Bytes, &quot;UTF8&quot;);
			System.out.println(&quot;roundTrip = &quot; + roundTrip);
 
			System.out.println();
			
			System.out.println();
			
		} catch (UnsupportedEncodingException e) {
			e.printStackTrace();
		}
		return defaultBytes;
	}
}</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\fosstrak\hal\UnsignedByteArray.java</td><td><a href="./xref/org/fosstrak/hal/UnsignedByteArray.html#151">151</a></td></tr><tr class="a"><td>org\fosstrak\hal\util\ByteBlock.java</td><td><a href="./xref/org/fosstrak/hal/util/ByteBlock.html#140">140</a></td></tr><tr class="b"><td colspan='2'><div class="source"><pre>			return ((ByteBlock)o).bytes.equals(this.bytes);
		else
			return false;
	}


	/**
	 * calculates a hashcode for the byte block.
	 * 
	 * @return the hashcode of the byte block.
	 * 
	 * @see java.lang.Object#hashCode()
	 */
	public int hashCode() {
		long v = 0;
		for (int i = bytes.length-1; i &gt;= 0; i--) {
			v = 256 * v + ((int)bytes[i] &amp; 0xFF);
		}
		return (int)v;
	}


	/**
	 * returns a string with the byte in hexadecimal representation.
	 * The byte is interpreted as unsigned value.
	 *
	 * @param b the byte.
	 *
	 * @return a string with the byte in hexadecimal representation.
	 */
	static public String byteToHexString(byte b) {
		int i = b;
		String h = &quot;0123456789ABCDEF&quot;;
		return &quot;&quot; + h.charAt((i &amp; 0xF0) &gt;&gt; 4) + h.charAt(i &amp; 0x0F);
	}


	/**
	 * returns a string with the bytes of the input array in hexadecimal
	 * representation.
	 *
	 * @param byteArray the array of bytes.
	 *
	 * @return a string with the bytes of the input array in hexadecimal
	 *          representation.
	 */
	static public String byteArrayToHexString(byte[] byteArray)
	{
		StringBuffer sb = new StringBuffer();

		for (int i = 0; i &lt; byteArray.length; i++)
			sb.append(byteToHexString(byteArray[i]));

		return sb.toString();
	}

	/**
	 * returns a string with the byte of the input array in hexadecimal
	 * representation trimed/padded to a specific length.
	 * 
	 * If length is less than the length of the input array, the most
	 * significant bits (low array indices) are cut.
	 * 
	 * If length is greater than the length of the input array, &quot;00&quot;
	 * bytes are added in front of the resulting string.
	 * 
	 * @param byteArray
	 * @param length
	 * @return a string with the bytes of the input array in hexadecimal
	 *          representation.
	 */
	static public String byteArrayToHexString(byte[] byteArray, int length) {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org\fosstrak\hal\UnsignedByteArray.java</td><td><a href="./xref/org/fosstrak/hal/UnsignedByteArray.html#204">204</a></td></tr><tr class="a"><td>org\fosstrak\hal\util\ByteBlock.java</td><td><a href="./xref/org/fosstrak/hal/util/ByteBlock.html#219">219</a></td></tr><tr class="b"><td colspan='2'><div class="source"><pre>		return byteArrayToHexString(data);
	}

	/**
	 * converts a String of hex bytes to a byte array.
	 *
	 * @param hexString the byte array as a String.
	 */
	static public byte[] hexStringToByteArray(String hexString)
	{
		byte[] byteArray;

		int len = hexString.length();
		byteArray = new byte[len/2];
		if (len % 2 != 0) throw new IllegalArgumentException();
		for (int i = 0; i &lt; len/2; i++){
			//String byteString = &quot;0x&quot;+hexString.substring(i*2, i*2+2);
			//Integer intValue = Integer.decode(byteString);
			String byteString = hexString.substring(i*2, i*2+2);
			Integer intValue = new Integer(Integer.parseInt(byteString, 16));
			byte byteValue = intValue.byteValue();
			byteArray[i] = byteValue;
		}

		return byteArray;
	}</pre></div></td></tr><table class="bodyTable"></p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2009
    
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
